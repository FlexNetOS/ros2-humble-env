# =============================================================================
# ARIA Security Environment Variables
# =============================================================================
# This file contains ALL secrets required for the ARIA platform.
# CRITICAL: Never commit actual .env files to version control!
#
# Usage:
#   1. Copy this file: cp .env.example .env
#   2. Fill in secure values for production
#   3. Source the file: source .env or set -a; source .env; set +a
#   4. Use with docker-compose: docker-compose --env-file .env up
#
# Production Recommendation:
#   Use HashiCorp Vault or similar secrets management solution.
#   See: config/vault/policy-secrets.hcl
# =============================================================================

# =============================================================================
# Identity & Access Management (docker-compose.identity.yml)
# =============================================================================

# Keycloak Admin Credentials
# WARNING: Change these immediately in production!
KEYCLOAK_ADMIN=${KEYCLOAK_ADMIN:-admin}
KEYCLOAK_ADMIN_PASSWORD=${KEYCLOAK_ADMIN_PASSWORD:-changeme}

# Keycloak Database Credentials
KEYCLOAK_DB_USER=${KEYCLOAK_DB_USER:-keycloak}
KEYCLOAK_DB_PASSWORD=${KEYCLOAK_DB_PASSWORD:-changeme}
KEYCLOAK_DB_NAME=${KEYCLOAK_DB_NAME:-keycloak}

# Vaultwarden Admin Token
# Generate with: openssl rand -base64 32
VAULTWARDEN_ADMIN_TOKEN=${VAULTWARDEN_ADMIN_TOKEN:-changeme}

# =============================================================================
# LLMOps Stack (docker-compose.llmops.yml)
# =============================================================================

# TensorZero ClickHouse Credentials
CLICKHOUSE_USER=${CLICKHOUSE_USER:-tensorzero}
CLICKHOUSE_PASSWORD=${CLICKHOUSE_PASSWORD:-changeme}
CLICKHOUSE_DB=${CLICKHOUSE_DB:-tensorzero}

# MLflow PostgreSQL Credentials
MLFLOW_DB_USER=${MLFLOW_DB_USER:-mlflow}
MLFLOW_DB_PASSWORD=${MLFLOW_DB_PASSWORD:-changeme}
MLFLOW_DB_NAME=${MLFLOW_DB_NAME:-mlflow}

# =============================================================================
# Automation Services (docker-compose.automation.yml)
# =============================================================================

# n8n Basic Authentication
N8N_BASIC_AUTH_USER=${N8N_BASIC_AUTH_USER:-admin}
N8N_BASIC_AUTH_PASSWORD=${N8N_BASIC_AUTH_PASSWORD:-changeme}

# n8n PostgreSQL Credentials
N8N_DB_USER=${N8N_DB_USER:-n8n}
N8N_DB_PASSWORD=${N8N_DB_PASSWORD:-changeme}
N8N_DB_NAME=${N8N_DB_NAME:-n8n}

# =============================================================================
# Observability Stack (docker-compose.observability.yml)
# =============================================================================

# Grafana Admin Credentials
GRAFANA_ADMIN_USER=${GRAFANA_ADMIN_USER:-admin}
GRAFANA_ADMIN_PASSWORD=${GRAFANA_ADMIN_PASSWORD:-changeme}

# Umami PostgreSQL Credentials
UMAMI_DB_USER=${UMAMI_DB_USER:-umami}
UMAMI_DB_PASSWORD=${UMAMI_DB_PASSWORD:-changeme}
UMAMI_DB_NAME=${UMAMI_DB_NAME:-umami}

# Umami App Secret (for JWT signing)
# Generate with: openssl rand -base64 32
UMAMI_APP_SECRET=${UMAMI_APP_SECRET:-changeme}

# Netdata Cloud Token (optional)
NETDATA_CLAIM_TOKEN=${NETDATA_CLAIM_TOKEN:-}

# =============================================================================
# Messaging & Workflow (docker-compose.messaging.yml & docker-compose.temporal.yml)
# =============================================================================

# Temporal PostgreSQL Credentials
TEMPORAL_DB_USER=${TEMPORAL_DB_USER:-temporal}
TEMPORAL_DB_PASSWORD=${TEMPORAL_DB_PASSWORD:-changeme}
TEMPORAL_DB_NAME=${TEMPORAL_DB_NAME:-temporal}

# =============================================================================
# Edge Gateway (docker-compose.edge.yml)
# =============================================================================

# Kong PostgreSQL Credentials
KONG_DB_USER=${KONG_DB_USER:-kong}
KONG_DB_PASSWORD=${KONG_DB_PASSWORD:-changeme}
KONG_DB_NAME=${KONG_DB_NAME:-kong}

# Konga Database Name
KONGA_DB_NAME=${KONGA_DB_NAME:-konga}

# =============================================================================
# UI Services (docker-compose.ui.yml)
# =============================================================================

# Lobe Chat PostgreSQL Credentials
LOBE_DB_USER=${LOBE_DB_USER:-lobe}
LOBE_DB_PASSWORD=${LOBE_DB_PASSWORD:-changeme}
LOBE_DB_NAME=${LOBE_DB_NAME:-lobe}

# Lobe Chat MinIO Credentials
LOBE_MINIO_ROOT_USER=${LOBE_MINIO_ROOT_USER:-changeme}
LOBE_MINIO_ROOT_PASSWORD=${LOBE_MINIO_ROOT_PASSWORD:-changeme}

# Next.js Auth Secret (for Lobe Chat)
# Generate with: openssl rand -base64 32
LOBE_NEXT_AUTH_SECRET=${LOBE_NEXT_AUTH_SECRET:-changeme}

# Open-Lovable - AI-powered web app builder
# Repository: https://github.com/firecrawl/open-lovable
# Build version (git branch or tag)
OPEN_LOVABLE_VERSION=${OPEN_LOVABLE_VERSION:-main}

# OpenAI-compatible API configuration (for both Lobe Chat and Open-Lovable)
OPENAI_API_KEY=${OPENAI_API_KEY:-sk-dummy-key-for-localai}
OPENAI_BASE_URL=${OPENAI_BASE_URL:-http://localai:8080/v1}

# Firecrawl API (optional - for web scraping/cloning features)
# Sign up at https://firecrawl.dev to get an API key
FIRECRAWL_API_KEY=${FIRECRAWL_API_KEY:-}
FIRECRAWL_API_URL=${FIRECRAWL_API_URL:-https://api.firecrawl.dev}

# Application URL
OPEN_LOVABLE_APP_URL=${OPEN_LOVABLE_APP_URL:-http://localhost:3211}

# Telemetry
OPEN_LOVABLE_TELEMETRY_DISABLED=${OPEN_LOVABLE_TELEMETRY_DISABLED:-true}

# =============================================================================
# AGiXT Stack (docker-compose.agixt.yml)
# =============================================================================
# Note: AGiXT already uses environment variables correctly!

# AGiXT API Key
AGIXT_API_KEY=${AGIXT_API_KEY:-changeme}

# AGiXT PostgreSQL Password
AGIXT_POSTGRES_PASSWORD=${AGIXT_POSTGRES_PASSWORD:-changeme}

# AGiXT MinIO Credentials
AGIXT_MINIO_ROOT_USER=${AGIXT_MINIO_ROOT_USER:-changeme}
AGIXT_MINIO_ROOT_PASSWORD=${AGIXT_MINIO_ROOT_PASSWORD:-changeme}

# =============================================================================
# Kubernetes (docker-compose.argo.yml)
# =============================================================================

# K3s Token (for cluster setup)
# Generate with: openssl rand -hex 32
K3S_TOKEN=${K3S_TOKEN:-changeme}

# =============================================================================
# Data & Query Services (docker-compose.data.yml)
# =============================================================================

# MindsDB API Key
# Generate with: openssl rand -base64 32
MINDSDB_API_KEY=${MINDSDB_API_KEY:-changeme}

# MindsDB PostgreSQL Credentials (metadata store)
MINDSDB_DB_HOST=${MINDSDB_DB_HOST:-mindsdb-db}
MINDSDB_DB_PORT=${MINDSDB_DB_PORT:-5432}
MINDSDB_DB_USER=${MINDSDB_DB_USER:-mindsdb}
MINDSDB_DB_PASSWORD=${MINDSDB_DB_PASSWORD:-changeme}
MINDSDB_DB_NAME=${MINDSDB_DB_NAME:-mindsdb}

# =============================================================================
# Security Best Practices
# =============================================================================
#
# Password Generation:
#   openssl rand -base64 32        # For general passwords
#   openssl rand -hex 32           # For tokens/keys
#   pwgen -s 32 1                  # Alternative (requires pwgen)
#
# Vault Integration:
#   vault kv put secret/aria/identity keycloak_admin_password=<secure-value>
#   vault kv put secret/aria/databases postgres_passwords=<secure-value>
#
# Environment Variable Precedence:
#   1. Exported environment variables (highest priority)
#   2. .env file in current directory
#   3. Default values in docker-compose files (lowest priority)
#
# Production Checklist:
#   [ ] All passwords changed from defaults
#   [ ] Secrets stored in Vault or equivalent
#   [ ] .env file has restricted permissions (chmod 600 .env)
#   [ ] .env file is in .gitignore
#   [ ] Secrets are rotated regularly (90 days recommended)
#   [ ] Audit logs enabled for all services
# =============================================================================
