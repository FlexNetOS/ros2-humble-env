# ros2-humble-env direnv configuration
# This file automatically loads the development environment

# Some environments (including certain dotfiles) set TMPDIR/TMP/TEMP to a path
# that may not exist (e.g., "$HOME/tmp"). Nix (and some installers) rely on
# these being valid directories.
if [[ -z "${TMPDIR:-}" ]]; then
  export TMPDIR=/tmp
fi
if [[ ! -d "${TMPDIR}" ]]; then
  mkdir -p "${TMPDIR}" 2>/dev/null || export TMPDIR=/tmp
fi
export TMP="${TMPDIR}"
export TEMP="${TMPDIR}"

# Use the nix flake devshell
use flake

# Optional: Source local overrides if they exist
if [[ -f .envrc.local ]]; then
  source .envrc.local
fi

# ROS2 workspace layout (uncomment if in a ROS2 workspace)
# layout ros2
# layout colcon
